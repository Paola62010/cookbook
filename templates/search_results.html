{% extends 'base.html' %}

{% block content %}

<main>

    {% if user.is_authenticated %}

    <section class="container py-3 py-lg-5 text-center">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1 class="mb-5">You have searched for:</h1>
                <h3>"{{ query }}"</h3>
            </div>   
        </div>
    </section>
    <section class="py-5 light-teal">
        <h3 class="text-center mb-5 search-title">From your personal recipes:</h3>
        <div class="container">
            {% if from_personal|length == 0 %}
		    <p class="text-center">You have no personal recipes matching your search.</p>
		    {% else %}
            <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3">
        	{% for recipe in from_personal %}
            <div class="col">
                <a href="{% url 'recipe_detail' recipe.slug recipe.id %}">
                <div class="card shadow">
                    <img src="{{recipe.recipe_image.url}}" class="card-img-top" alt="Recipe image">
                    <div class="card-body">
                    <p class="card-text text-center">{{ recipe.title }}</p>
                    </div>
                </div>
                </a>
            </div>
            {% endfor %}
	        {% endif %}
        </div>
    </div>
    </section>
    <section class="py-5 light-teal">
        <h3 class="text-center mb-5 search-title">From the community:</h3>
        <div class="container">
            {% if all_public|length == 0 %}
		    <p class="text-center">There are no recipes from our community that match your search.</p>
		    {% else %}
            <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3">
        	{% for recipe in all_public %}
            <div class="col">
                <a href="{% url 'recipe_detail' recipe.slug recipe.id %}">
                <div class="card shadow">
                    <img src="{{recipe.recipe_image.url}}" class="card-img-top" alt="Recipe image">
                    <div class="card-body">
                    <p class="card-text text-center">{{ recipe.title }}</p>
                    </div>
                </div>
                </a>
            </div>
            {% endfor %}
	        {% endif %}
        </div>
    </div>
    </section>

    {% else %}

    <section class="container py-3 py-lg-5 text-center">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1 class="mb-5">You have searched for:</h1>
                <h3>"{{ query }}"</h3>
            </div>   
        </div>
    </section>
    <section class="py-5 light-teal">
        <h3 class="text-center mb-5 search-title">From the community:</h3>
        <div class="container">
            {% if all_public2|length == 0 %}
		    <p class="text-center">There are no recipes from our community that match your search.</p>
		    {% else %}
            <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3">
        	{% for recipe in all_public2 %}
            <div class="col">
                <a href="{% url 'recipe_detail' recipe.slug recipe.id %}">
                <div class="card shadow">
                    <img src="{{recipe.recipe_image.url}}" class="card-img-top" alt="Recipe image">
                    <div class="card-body">
                    <p class="card-text text-center">{{ recipe.title }}</p>
                    </div>
                </div>
                </a>
            </div>
            {% endfor %}
	        {% endif %}
        </div>
    </div>
</section>
    {% endif %}
</main>

{% endblock %}