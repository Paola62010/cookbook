{% extends 'base.html' %}

{% block content %}

<main>
    <section>
    <h1 class="text-center py-5 my-md-5">Create a new Recipe</h1>
    <div class="container-md py-5 px-md-5 mb-5 light-teal recipe-container">
        <form method="post" enctype="multipart/form-data" id="recipe-form">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="table-responsive">
            <table class="table">
                <caption>Ingredients</caption>
                {{ ingredients.management_form }}

                {% for form in ingredients.forms %}
                {% if forloop.first %}
                    <thead>
                    <tr>
                        {% for field in form.visible_fields %}
                            <th scope="col">{{ field.label|capfirst }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                {% endif %}
                <tr class="formset_row">
                    {% for field in form.visible_fields %}
                        <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
        </div>
        <div class="table-responsive">
        <table class="table">
            <caption>Steps</caption>
            {{ steps.management_form }}

            {% for form in steps.forms %}
            {% if forloop.first %}
                <thead>
                <tr>
                    {% for field in form.visible_fields %}
                        <th scope="col">{{ field.label|capfirst }}</th>
                    {% endfor %}
                </tr>
                </thead>
            {% endif %}
            <tr class="formset_row">
                {% for field in form.visible_fields %}
                    <td>
                        {# Include the hidden fields in the form #}
                        {% if forloop.first %}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        {% endif %}
                        {{ field.errors.as_ul }}
                        {{ field }}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
    </div>
        <input id="save-btn" type="submit" value="Save"/>
            </table>
        </form>
    </div>
</section>
</main>

{% endblock %}